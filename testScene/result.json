[{"name":"Scale","value":[100,100,100],"expression":""},{"name":"Position","value":[0,0,0],"expression":"[0,0]"},{"name":"Opacity","value":50,"expression":""},{"name":"Rotation","value":0,"expression":""},{"name":"Anchor Point","value":[0,0,0],"expression":""},{"name":"fingers"},{"name":"fingerOne"},{"name":"Position","value":[0,0],"expression":""},{"name":"Scale","value":[100,100],"expression":""},{"name":"Skew","value":0,"expression":""},{"name":"Opacity","value":100,"expression":""},{"name":"Anchor Point","value":[0,0],"expression":""},{"name":"Rotation","value":0,"expression":""},{"name":"Skew Axis","value":0,"expression":""},{"name":"joints"},{"name":"Position","value":[0,0],"expression":""},{"name":"Scale","value":[100,100],"expression":""},{"name":"Skew","value":0,"expression":""},{"name":"Opacity","value":100,"expression":""},{"name":"Anchor Point","value":[0,0],"expression":""},{"name":"Rotation","value":0,"expression":""},{"name":"Skew Axis","value":0,"expression":""},{"name":"end"},{"name":"Position","value":[150.05,-500.25],"expression":"var fingerName = \"fingerOne\";\r\nvar jointName = \"distal\"\r\n\r\nconst parentJoint = content(\"fingers\").content(fingerName).content(\"joints\").content(jointName);\r\n\r\nconst parentPos = parentJoint.transform.position;\r\nconst parentRot = degreesToRadians(parentJoint.transform.rotation);\r\nvar rotatedX = value[0] * Math.cos(parentRot) - value[1] * Math.sin(parentRot);\r\nvar rotatedY = value[0] * Math.sin(parentRot) + value[1] * Math.cos(parentRot);\r\n\r\n[rotatedX, rotatedY] + parentPos;"},{"name":"Scale","value":[100,100],"expression":""},{"name":"Skew","value":0,"expression":""},{"name":"Opacity","value":100,"expression":""},{"name":"Anchor Point","value":[0,0],"expression":""},{"name":"Rotation","value":0,"expression":"var fingerName = \"fingerOne\";\r\nvar parentJoint = \"distal\";\r\n\r\nvar joint = content(\"fingers\").content(fingerName).content(\"joints\").content(parentJoint);\r\n\r\njoint.transform.rotation;"},{"name":"Skew Axis","value":0,"expression":""},{"name":"ellipse"},{"name":"Size","value":[50.1,50.1],"expression":""},{"name":"Position","value":[0,0],"expression":""},{"name":"distal"},{"name":"Transform"},{"name":"Position","value":[140.65,-434.55],"expression":"var fingerName = \"fingerOne\";\r\nvar jointName = \"proximal\"\r\n\r\nconst parentJoint = content(\"fingers\").content(fingerName).content(\"joints\").content(jointName);\r\n\r\nconst parentPos = parentJoint.transform.position;\r\nconst parentRot = degreesToRadians(parentJoint.transform.rotation);\r\nvar rotatedX = value[0] * Math.cos(parentRot) - value[1] * Math.sin(parentRot);\r\nvar rotatedY = value[0] * Math.sin(parentRot) + value[1] * Math.cos(parentRot);\r\n\r\n[rotatedX, rotatedY] + parentPos;"},{"name":"Scale","value":[100,100],"expression":""},{"name":"Skew","value":0,"expression":""},{"name":"Opacity","value":100,"expression":""},{"name":"Anchor Point","value":[0,0],"expression":""},{"name":"Rotation","value":0,"expression":"var fingerName = \"fingerOne\";\r\nvar parentJoint = \"proximal\";\r\n\r\nvar angle = parent.effect(\"finger grasp\")(\"Angle\");\r\nvar joint = content(\"fingers\").content(fingerName).content(\"joints\").content(parentJoint);\r\n\r\nangle + joint.transform.rotation"},{"name":"Skew Axis","value":0,"expression":""},{"name":"ellipse"},{"name":"Size","value":[60.3,60.3],"expression":""},{"name":"Position","value":[0,0],"expression":""},{"name":"proximal"},{"name":"Transform"},{"name":"Position","value":[129.5,-366.25],"expression":"var fingerName = \"fingerOne\";\r\nvar jointName = \"metacarpal\"\r\n\r\nconst parentJoint = content(\"fingers\").content(fingerName).content(\"joints\").content(jointName);\r\n\r\nconst parentPos = parentJoint.transform.position;\r\nconst parentRot = degreesToRadians(parentJoint.transform.rotation);\r\nvar rotatedX = value[0] * Math.cos(parentRot) - value[1] * Math.sin(parentRot);\r\nvar rotatedY = value[0] * Math.sin(parentRot) + value[1] * Math.cos(parentRot);\r\n\r\n[rotatedX, rotatedY] + parentPos;"},{"name":"Scale","value":[100,100],"expression":""},{"name":"Skew","value":0,"expression":""},{"name":"Opacity","value":100,"expression":""},{"name":"Anchor Point","value":[0,0],"expression":""},{"name":"Rotation","value":0,"expression":"var fingerName = \"fingerOne\";\r\nvar parentJoint = \"metacarpal\";\r\n\r\nvar angle = parent.effect(\"finger grasp\")(\"Angle\");\r\nvar joint = content(\"fingers\").content(fingerName).content(\"joints\").content(parentJoint);\r\n\r\nangle + joint.transform.rotation"},{"name":"Skew Axis","value":0,"expression":""},{"name":"ellipse"},{"name":"Size","value":[65.2,65.2],"expression":""},{"name":"Position","value":[0,0],"expression":""},{"name":"metacarpal"},{"name":"Transform"},{"name":"Position","value":[112,-288.5],"expression":"var parentJoint = content(\"wrist\").content(\"joint\");\r\n\r\nvar axisXPosition = parentJoint.transform.position[0];\r\nyRot = -thisComp.layer(\"ctrl hand\").effect(\"Y rotation\")(\"Angle\");\r\n\r\nctrlr = ((yRot % 360) + 360) % 360;\r\nmaxTrans = axisXPosition / 2 + value[0];\r\n\r\nfunction rotate() {\r\n  front1 = -easeOut(ctrlr, 0, 90, 0, maxTrans);\r\n  back = -ease(ctrlr, 90, 270, 0, -maxTrans * 2);\r\n  front2 = -easeIn(ctrlr, 270, 360, 0, maxTrans);\r\n  return front1 + back + front2;\r\n}\r\nvar x = rotate() + axisXPosition;\r\nvar y = value[1];\r\n\r\n[x,y]"},{"name":"Scale","value":[100,100],"expression":""},{"name":"Skew","value":0,"expression":""},{"name":"Opacity","value":100,"expression":""},{"name":"Anchor Point","value":[0,0],"expression":""},{"name":"Rotation","value":0,"expression":"thisComp.layer(\"ctrl hand\").effect(\"finger grasp\")(\"Angle\")"},{"name":"Skew Axis","value":0,"expression":""},{"name":"ellipse"},{"name":"Size","value":[78,78],"expression":""},{"name":"Position","value":[0,0],"expression":""},{"name":"bones"},{"name":"Path 1"},{"name":"Path","value":{"closed":true,"featherInterps":[

],"featherRadii":[

],"featherRelCornerAngles":[

],"featherRelSegLocs":[

],"featherSegLocs":[

],"featherTensions":[

],"featherTypes":[

],"inTangents":[[0.89866638183594,-3.99258422851562],[0.26301574707031,-4.08401489257812],[-0.37910461425781,-4.07489013671875],[-1.01190185546875,-3.96542358398438],[-1.61976623535156,-3.75830078125],[-2.187744140625,-3.45864868164062],[-2.70187377929688,-3.07382202148438],[-3.14945983886719,-2.61331176757812],[-3.51950073242188,-2.08847045898438],[-3.8028564453125,-1.51214599609375],[-3.99259948730469,-0.89865112304688],[-4.08403015136719,-0.26300048828125],[-4.07489013671875,0.37911987304688],[-3.96540832519531,1.01190185546875],[-3.75830078125,1.6197509765625],[-3.45864868164062,2.187744140625],[-3.07382202148438,2.70187377929688],[-2.61331176757812,3.14944458007812],[-2.08845520019531,3.51950073242188],[-1.51217651367188,3.8028564453125],[0,0],[-4.5467529296875,23.4385070800781],[-3.46624755859375,22.6334228515625],[-2.82000732421875,19.7099914550781],[0.03935241699219,2.62835693359375],[0.45002746582031,2.58981323242188],[0.84962463378906,2.487548828125],[1.22830200195312,2.32400512695312],[1.57673645019531,2.103271484375],[1.88633728027344,1.8306884765625],[2.14950561523438,1.5130615234375],[2.3597412109375,1.158203125],[2.51185607910156,0.7747802734375],[2.60214233398438,0.372314453125],[2.62834167480469,-0.03936767578125],[2.58982849121094,-0.45001220703125],[2.487548828125,-0.849609375],[2.32400512695312,-1.228271484375],[2.10324096679688,-1.57672119140625],[1.8306884765625,-1.8863525390625],[1.5130615234375,-2.14947509765625],[1.15817260742188,-2.35971069335938],[0.77476501464844,-2.51187133789062],[0,0],[3.46624755859375,-22.6334228515625],[4.5467529296875,-23.4385070800781],[5.25,-23.3250122070312],[0,0]],"outTangents":[[-0.89865112304688,3.99261474609375],[-0.26301574707031,4.08401489257812],[0.37911987304688,4.07489013671875],[1.01188659667969,3.96542358398438],[1.61976623535156,3.75830078125],[2.18775939941406,3.45864868164062],[2.70185852050781,3.07382202148438],[3.14944458007812,2.61331176757812],[3.51948547363281,2.08843994140625],[3.80287170410156,1.51220703125],[3.99259948730469,0.89865112304688],[4.08403015136719,0.26300048828125],[4.07489013671875,-0.37911987304688],[3.96542358398438,-1.01190185546875],[3.75830078125,-1.6197509765625],[3.45864868164062,-2.187744140625],[3.07382202148438,-2.70187377929688],[2.61331176757812,-3.14944458007812],[2.08845520019531,-3.51950073242188],[1.51217651367188,-3.8028564453125],[5.25,-23.3250122070312],[4.5467529296875,-23.4385070800781],[3.46624755859375,-22.6334228515625],[0,0],[-0.03935241699219,-2.62835693359375],[-0.45002746582031,-2.58981323242188],[-0.84962463378906,-2.487548828125],[-1.22830200195312,-2.32400512695312],[-1.57673645019531,-2.103271484375],[-1.88633728027344,-1.8306884765625],[-2.14950561523438,-1.5130615234375],[-2.3597412109375,-1.158203125],[-2.51185607910156,-0.7747802734375],[-2.60214233398438,-0.372314453125],[-2.62834167480469,0.03936767578125],[-2.58982849121094,0.45001220703125],[-2.487548828125,0.849609375],[-2.32400512695312,1.228271484375],[-2.10324096679688,1.57672119140625],[-1.8306884765625,1.8863525390625],[-1.5130615234375,2.14947509765625],[-1.15818786621094,2.3597412109375],[-0.7747802734375,2.51187133789062],[-2.81999206542969,19.7099914550781],[-3.46624755859375,22.6334228515625],[-4.5467529296875,23.4385070800781],[0,0],[0,0]],"vertices":[[73.9518737792969,-297.063873291016],[73.0806274414062,-291.006408691406],[73.1676940917969,-284.887237548828],[74.2109527587891,-278.856994628906],[76.1846923828125,-273.064208984375],[79.0403289794922,-267.651489257812],[82.7075500488281,-262.752136230469],[87.0960388183594,-258.486785888672],[92.0977478027344,-254.96044921875],[97.5895080566406,-252.260009765625],[103.436111450195,-250.451873779297],[109.493591308594,-249.580627441406],[115.612777709961,-249.667694091797],[121.643005371094,-250.7109375],[127.435806274414,-252.684692382812],[132.848510742188,-255.540344238281],[137.747848510742,-259.207550048828],[142.013198852539,-263.596038818359],[145.539535522461,-268.597747802734],[148.240005493164,-274.089508056641],[150.048126220703,-279.936126708984],[161.503402709961,-360.041778564453],[170.452529907227,-429.98583984375],[174.847473144531,-496.702117919922],[175.097198486328,-500.624969482422],[174.730163574219,-504.538604736328],[173.755416870117,-508.346618652344],[172.196975708008,-511.955291748047],[170.093200683594,-515.275756835938],[167.495895385742,-518.226196289062],[164.469009399414,-520.734008789062],[161.08708190918,-522.737426757812],[157.433395385742,-524.187194824219],[153.597885131836,-525.047485351562],[149.675033569336,-525.297180175781],[145.76139831543,-524.93017578125],[141.953369140625,-523.955444335938],[138.344711303711,-522.39697265625],[135.024276733398,-520.293212890625],[132.073822021484,-517.695922851562],[129.565994262695,-514.669006347656],[127.562561035156,-511.287078857422],[126.112838745117,-507.633392333984],[125.252517700195,-503.797882080078],[110.847473144531,-439.114166259766],[97.4965972900391,-372.458221435547],[73.9518737792969,-297.063873291016],[73.9518737792969,-297.063873291016]]},"expression":"var fingerName = \"fingerOne\";\r\n\r\nvar smoothness = parent.effect(\"finger smoothness\")(\"Slider\"); // 0-1\r\nvar taper = parent.effect(\"Taper Amount\")(\"Slider\"); // 0–100\r\nvar softness = parent.effect(\"Joint Softness\")(\"Slider\") / 100; // 0–1\r\nvar tipSegments = Math.max(6, Math.round(smoothness * 2));\r\nvar baseSegments = tipSegments;\r\n\r\n// === Joint Positions & Widths ===\r\n\r\nvar joints = [\r\n    content(\"fingers\").content(fingerName).content(\"joints\").content(\"metacarpal\"),\r\n    content(\"fingers\").content(fingerName).content(\"joints\").content(\"proximal\"),\r\n    content(\"fingers\").content(fingerName).content(\"joints\").content(\"distal\"),\r\n    content(\"fingers\").content(fingerName).content(\"joints\").content(\"end\")\r\n];\r\nvar points = joints.map(function(j) { return j.transform.position; });\r\n\r\n// Apply tapering\r\nvar widths = joints.map(function(j, i) {\r\n    var baseWidth = j.content(\"ellipse\").size[0];\r\n    var factor = 1 - (i / (joints.length - 1)) * (taper / 100);\r\n    return baseWidth * factor;\r\n});\r\n\r\n// === Vector Helpers ===\r\n\r\nfunction sub(a, b) { return [a[0] - b[0], a[1] - b[1]]; }\r\nfunction add(a, b) { return [a[0] + b[0], a[1] + b[1]]; }\r\nfunction scale(v, s) { return [v[0] * s, v[1] * s]; }\r\nfunction norm(v) {\r\n    var l = Math.sqrt(v[0] * v[0] + v[1] * v[1]);\r\n    return l === 0 ? [0, 0] : [v[0] / l, v[1] / l];\r\n}\r\nfunction perp(v) { return [-v[1], v[0]]; }\r\nfunction dist(a, b) {\r\n    var dx = b[0] - a[0], dy = b[1] - a[1];\r\n    return Math.sqrt(dx * dx + dy * dy);\r\n}\r\nfunction angleBetween(a, b) {\r\n    var dot = a[0] * b[0] + a[1] * b[1];\r\n    var det = a[0] * b[1] - a[1] * b[0];\r\n    return Math.atan2(det, dot);\r\n}\r\nfunction customLinear(val, inMin, inMax, outMin, outMax) {\r\n    val = Math.max(inMin, Math.min(val, inMax));\r\n    return outMin + (val - inMin) * (outMax - outMin) / (inMax - inMin);\r\n}\r\n\r\n// === Compute Tangents for Centerline ===\r\n\r\nvar inTangents = [], outTangents = [];\r\nvar bends = []; // Store bend values for each intermediate point\r\n\r\nfor (var i = 0; i < points.length; i++) {\r\n    if (i === 0) {\r\n        var dir = norm(sub(points[1], points[0]));\r\n        var len = dist(points[0], points[1]) * softness;\r\n        inTangents.push([0, 0]);\r\n        outTangents.push(scale(dir, len));\r\n        bends.push(0); // No bend at the start\r\n    } else if (i === points.length - 1) {\r\n        var dir = norm(sub(points[i], points[i-1]));\r\n        var len = dist(points[i], points[i-1]) * softness;\r\n        inTangents.push(scale(dir, -len));\r\n        outTangents.push([0, 0]);\r\n        bends.push(0); // No bend at the end\r\n    } else {\r\n        var prev = norm(sub(points[i], points[i - 1]));\r\n        var next = norm(sub(points[i + 1], points[i]));\r\n        var dir = norm(add(prev, next));\r\n\r\n        // Concave/convex weighting via dot product (bend calculation)\r\n        var bend = prev[0] * next[0] + prev[1] * next[1];\r\n        bends.push(bend); // Store the bend value\r\n\r\n        var concaveFactor = customLinear(bend, -1, 1, 0.1, 1);\r\n        var len = Math.min(dist(points[i], points[i - 1]), dist(points[i], points[i + 1])) * softness * concaveFactor;\r\n        inTangents.push(scale(dir, -len));\r\n        outTangents.push(scale(dir, len));\r\n    }\r\n}\r\nbends.unshift(0); // Add a bend value for the first point\r\nbends.push(0);  // Add a bend value for the last point\r\n\r\n// === Offset Curve Function ===\r\n\r\nfunction offsetPath(side, bend) {\r\n    var newPoints = [], newInTangents = [], newOutTangents = [];\r\n\r\n    for (var i = 0; i < points.length; i++) {\r\n        var p = points[i];\r\n        var width = widths[i] / 2;\r\n\r\n        var dir;\r\n        if (i === 0) {\r\n            dir = norm(sub(points[1], points[0]));\r\n        } else if (i === points.length - 1) {\r\n            dir = norm(sub(points[i], points[i - 1]));\r\n        } else {\r\n            var prev = norm(sub(p, points[i - 1]));\r\n            var next = norm(sub(points[i + 1], p));\r\n            dir = norm(add(prev, next));\r\n        }\r\n\r\n        var perpDir = side === \"left\" ? perp(dir) : scale(perp(dir), -1);\r\n        var offset = scale(perpDir, width);\r\n\r\n        newPoints.push(add(p, offset));\r\n\r\n        // Force Near-Zero Tangents on Inside of Bent Knuckles\r\n        if (i > 0 && i < points.length - 1) {\r\n            var tangentLength = Math.min(dist(points[i], points[i - 1]), dist(points[i], points[i + 1])) * softness;\r\n            var smoothnessFactor = customLinear(softness, 0, 1, 1, 1.5);\r\n\r\n            if ((side === \"left\" && bend < -0.3) || (side === \"right\" && bend > 0.3)) {\r\n                // Force near-zero tangents on the inside\r\n                newInTangents.push([0, 0]);\r\n                newOutTangents.push([0, 0]);\r\n            } else { // Outside or less bent\r\n                newInTangents.push(scale(dir, -tangentLength * smoothnessFactor));\r\n                newOutTangents.push(scale(dir, tangentLength * smoothnessFactor));\r\n            }\r\n        } else {\r\n            newInTangents.push(inTangents[i]);\r\n            newOutTangents.push(outTangents[i]);\r\n        }\r\n    }\r\n\r\n    return {\r\n        pts: newPoints,\r\n        inTangents: newInTangents,\r\n        outTangents: newOutTangents\r\n    };\r\n}\r\n\r\n// === Left and Right Sides ===\r\nvar left = offsetPath(\"left\", bends);\r\nvar right = offsetPath(\"right\", bends);\r\n\r\n// === Tip Arc ===\r\n\r\nvar tipPoints = [], tipInTangents = [], tipOutTangents = [];\r\n\r\nvar tipCenter = points[points.length - 1];\r\nvar tipRadius = widths[widths.length - 1] / 2;\r\nvar tipDir = norm(sub(points[points.length - 1], points[points.length - 2]));\r\nvar tipPerp = perp(tipDir);\r\nvar arcLen = 4 / 3 * Math.tan(Math.PI / (2 * tipSegments));\r\n\r\nfor (var i = 0; i <= tipSegments; i++) {\r\n    var angle = Math.PI * i / tipSegments;\r\n    var x = Math.cos(angle) * tipRadius;\r\n    var y = Math.sin(angle) * tipRadius;\r\n\r\n    var pt = [\r\n        tipCenter[0] + x * tipPerp[0] + y * tipDir[0],\r\n        tipCenter[1] + x * tipPerp[1] + y * tipDir[1]\r\n    ];\r\n    tipPoints.push(pt);\r\n\r\n    var tanDir = [-Math.sin(angle), Math.cos(angle)];\r\n    var tangent = scale([\r\n        tanDir[0] * tipPerp[0] + tanDir[1] * tipDir[0],\r\n        tanDir[0] * tipPerp[1] + tanDir[1] * tipDir[1]\r\n    ], tipRadius * arcLen);\r\n\r\n    tipInTangents.push(scale(tangent, -1));\r\n    tipOutTangents.push(tangent);\r\n}\r\n\r\n// === Base Arc ===\r\n\r\nvar basePoints = [], baseInTangents = [], baseOutTangents = [];\r\n\r\nvar baseCenter = points[0];\r\nvar baseRadius = widths[0] / 2;\r\nvar baseDir = norm(sub(points[1], points[0]));\r\nvar basePerp = perp(baseDir);\r\nvar baseArcLen = 4 / 3 * Math.tan(Math.PI / (2 * baseSegments));\r\n\r\nfor (var i = 0; i <= baseSegments; i++) {\r\n    var angle = Math.PI + Math.PI * i / baseSegments;\r\n    var x = Math.cos(angle) * baseRadius;\r\n    var y = Math.sin(angle) * baseRadius;\r\n\r\n    var pt = [\r\n        baseCenter[0] + x * basePerp[0] + y * baseDir[0],\r\n        baseCenter[1] + x * basePerp[1] + y * baseDir[1]\r\n    ];\r\n    basePoints.push(pt);\r\n\r\n    var tanDir = [-Math.sin(angle), Math.cos(angle)];\r\n    var tangent = scale([\r\n        tanDir[0] * basePerp[0] + tanDir[1] * baseDir[0],\r\n        tanDir[0] * basePerp[1] + tanDir[1] * baseDir[1]\r\n    ], baseRadius * baseArcLen);\r\n\r\n    baseInTangents.push(scale(tangent, -1));\r\n    baseOutTangents.push(tangent);\r\n}\r\n\r\n// === Combine All Points ===\r\n\r\nvar finalPts = basePoints\r\n    .slice(0, -1)\r\n    .concat(left.pts)\r\n    .concat(tipPoints.slice(1, -1))\r\n    .concat(right.pts.reverse());\r\n\r\nvar finalInTangents = baseInTangents\r\n    .slice(0, -1)\r\n    .concat(left.inTangents)\r\n    .concat(tipInTangents.slice(1, -1))\r\n    .concat(right.outTangents.reverse());\r\n\r\nvar finalOutTangents = baseOutTangents\r\n    .slice(0, -1)\r\n    .concat(left.outTangents)\r\n    .concat(tipOutTangents.slice(1, -1))\r\n    .concat(right.inTangents.reverse());\r\n\r\n// === Close Path ===\r\n\r\nfinalPts.push(finalPts[0]);\r\nfinalInTangents.push([0, 0]);\r\nfinalOutTangents.push([0, 0]);\r\n\r\n// === Create Path ===\r\n\r\ncreatePath(finalPts, finalInTangents, finalOutTangents, true);"},{"name":"thumb"},{"name":"Position","value":[0,0],"expression":""},{"name":"Scale","value":[100,100],"expression":""},{"name":"Skew","value":0,"expression":""},{"name":"Opacity","value":100,"expression":""},{"name":"Anchor Point","value":[0,0],"expression":""},{"name":"Rotation","value":0,"expression":""},{"name":"Skew Axis","value":0,"expression":""},{"name":"joints"},{"name":"Position","value":[0,0],"expression":""},{"name":"Scale","value":[100,100],"expression":""},{"name":"Skew","value":0,"expression":""},{"name":"Opacity","value":100,"expression":""},{"name":"Anchor Point","value":[0,0],"expression":""},{"name":"Rotation","value":0,"expression":""},{"name":"Skew Axis","value":0,"expression":""},{"name":"end"},{"name":"Position","value":[270.5,-220.5],"expression":"var fingerName = \"thumb\";\r\nvar jointName = \"distal\"\r\n\r\nconst parentJoint = content(\"fingers\").content(fingerName).content(\"joints\").content(jointName);\r\n\r\nconst parentPos = parentJoint.transform.position;\r\nconst parentRot = degreesToRadians(parentJoint.transform.rotation);\r\nvar rotatedX = value[0] * Math.cos(parentRot) - value[1] * Math.sin(parentRot);\r\nvar rotatedY = value[0] * Math.sin(parentRot) + value[1] * Math.cos(parentRot);\r\n\r\n[rotatedX, rotatedY] + parentPos;"},{"name":"Scale","value":[100,100],"expression":""},{"name":"Skew","value":0,"expression":""},{"name":"Opacity","value":100,"expression":""},{"name":"Anchor Point","value":[0,0],"expression":""},{"name":"Rotation","value":0,"expression":"var fingerName = \"thumb\";\r\nvar parentJoint = \"distal\";\r\n\r\nvar joint = content(\"fingers\").content(fingerName).content(\"joints\").content(parentJoint);\r\n\r\njoint.transform.rotation;"},{"name":"Skew Axis","value":0,"expression":""},{"name":"Size","value":[69.5,69.5],"expression":""},{"name":"Position","value":[0,0],"expression":""},{"name":"distal"},{"name":"Position","value":[202,-174],"expression":"var fingerName = \"thumb\";\r\nvar jointName = \"proximal\"\r\n\r\nconst parentJoint = content(\"fingers\").content(fingerName).content(\"joints\").content(jointName);\r\n\r\nconst parentPos = parentJoint.transform.position;\r\nconst parentRot = degreesToRadians(parentJoint.transform.rotation);\r\nvar rotatedX = value[0] * Math.cos(parentRot) - value[1] * Math.sin(parentRot);\r\nvar rotatedY = value[0] * Math.sin(parentRot) + value[1] * Math.cos(parentRot);\r\n\r\n[rotatedX, rotatedY] + parentPos;"},{"name":"Scale","value":[100,100],"expression":""},{"name":"Skew","value":0,"expression":""},{"name":"Opacity","value":100,"expression":""},{"name":"Anchor Point","value":[0,0],"expression":""},{"name":"Rotation","value":0,"expression":"var fingerName = \"thumb\";\r\nvar parentJoint = \"proximal\";\r\n\r\nvar angle = parent.effect(\"finger grasp\")(\"Angle\");\r\nvar joint = content(\"fingers\").content(fingerName).content(\"joints\").content(parentJoint);\r\n\r\nangle + joint.transform.rotation"},{"name":"Skew Axis","value":0,"expression":""},{"name":"Size","value":[80,80],"expression":""},{"name":"Position","value":[0,0],"expression":""},{"name":"proximal"},{"name":"Position","value":[140.5,-91],"expression":"var fingerName = \"thumb\";\r\nvar jointName = \"metacarpal\"\r\n\r\nconst parentJoint = content(\"fingers\").content(fingerName).content(\"joints\").content(jointName);\r\n\r\nconst parentPos = parentJoint.transform.position;\r\nconst parentRot = degreesToRadians(parentJoint.transform.rotation);\r\nvar rotatedX = value[0] * Math.cos(parentRot) - value[1] * Math.sin(parentRot);\r\nvar rotatedY = value[0] * Math.sin(parentRot) + value[1] * Math.cos(parentRot);\r\n\r\n[rotatedX, rotatedY] + parentPos;"},{"name":"Scale","value":[100,100],"expression":""},{"name":"Skew","value":0,"expression":""},{"name":"Opacity","value":100,"expression":""},{"name":"Anchor Point","value":[0,0],"expression":""},{"name":"Rotation","value":0,"expression":"var fingerName = \"thumb\";\r\nvar parentJoint = \"metacarpal\";\r\n\r\nvar angle = parent.effect(\"finger grasp\")(\"Angle\");\r\nvar joint = content(\"fingers\").content(fingerName).content(\"joints\").content(parentJoint);\r\n\r\nangle + joint.transform.rotation"},{"name":"Skew Axis","value":0,"expression":""},{"name":"Size","value":[86,86],"expression":""},{"name":"Position","value":[0,0],"expression":""},{"name":"metacarpal"},{"name":"Position","value":[0,0],"expression":"content(\"wrist\").content(\"joint\").transform.position"},{"name":"Scale","value":[100,100],"expression":""},{"name":"Skew","value":0,"expression":""},{"name":"Opacity","value":100,"expression":""},{"name":"Anchor Point","value":[0,0],"expression":""},{"name":"Rotation","value":0,"expression":"thisComp.layer(\"ctrl hand\").effect(\"finger grasp\")(\"Angle\")"},{"name":"Skew Axis","value":0,"expression":""},{"name":"Size","value":[219,219],"expression":"content(\"wrist\").content(\"joint\").content(\"ellipse\").size"},{"name":"Position","value":[0,0],"expression":""},{"name":"bones"},{"name":"Position","value":[0,0],"expression":""},{"name":"Scale","value":[100,100],"expression":""},{"name":"Skew","value":0,"expression":""},{"name":"Opacity","value":100,"expression":""},{"name":"Anchor Point","value":[0,0],"expression":""},{"name":"Rotation","value":0,"expression":""},{"name":"Skew Axis","value":0,"expression":""},{"name":"Path 1"},{"name":"Path","value":{"closed":true,"featherInterps":[

],"featherRadii":[

],"featherRelCornerAngles":[

],"featherRelSegLocs":[

],"featherSegLocs":[

],"featherTensions":[

],"featherTypes":[

],"inTangents":[[9.644287109375,-6.2464599609375],[8.54838562011719,-7.67825317382812],[7.24198913574219,-8.92098999023438],[5.75726318359375,-9.94404602050781],[4.13079833984375,-10.7222747802734],[2.40261840820312,-11.2364501953125],[0.61526489257812,-11.4739685058594],[-1.18722534179688,-11.4289398193359],[-2.96051025390625,-11.1025085449219],[-4.66085815429688,-10.502685546875],[-6.24647521972656,-9.64425659179688],[-7.67825317382812,-8.54837036132812],[-8.92098999023438,-7.24197387695312],[-9.94406127929688,-5.75726318359375],[-10.7222747802734,-4.13079833984375],[-11.2364501953125,-2.40261840820312],[-11.4739685058594,-0.61526489257812],[-11.428955078125,1.18722534179688],[-11.1025238037109,2.96051025390625],[-10.5027008056641,4.66085815429688],[0,0],[-25.9811859130859,24.3951873779297],[-20.6101379394531,19.7757415771484],[-20.5499877929688,13.9499969482422],[-2.65951538085938,2.49481201171875],[-2.23648071289062,2.88014221191406],[-1.75839233398438,3.19453430175781],[-1.23699951171875,3.43028259277344],[-0.6851806640625,3.58155822753906],[-0.116455078125,3.6446533203125],[0.45513916015625,3.61799621582031],[1.0155029296875,3.50225830078125],[1.55087280273438,3.30027770996094],[2.04806518554688,3.01702880859375],[2.49481201171875,2.65950012207031],[2.880126953125,2.23648071289062],[3.19454956054688,1.75839233398438],[3.4302978515625,1.23701477050781],[3.58157348632812,0.68516540527344],[3.6446533203125,0.116455078125],[3.61801147460938,-0.45512390136719],[3.50225830078125,-1.0155029296875],[3.30026245117188,-1.55087280273438],[0,0],[20.6101379394531,-19.7757263183594],[25.9811553955078,-24.3951721191406],[42.1500091552734,-27.3000030517578],[0,0]],"outTangents":[[-9.64427185058594,6.2464599609375],[-8.54837036132812,7.67826843261719],[-7.24197387695312,8.92100524902344],[-5.75727844238281,9.94404602050781],[-4.13079833984375,10.7222595214844],[-2.40260314941406,11.2364501953125],[-0.61526489257812,11.4739685058594],[1.18724060058594,11.428955078125],[2.96049499511719,11.1025390625],[4.66087341308594,10.5027160644531],[6.2464599609375,9.644287109375],[7.67826843261719,8.54837036132812],[8.92098999023438,7.24197387695312],[9.94404602050781,5.75729370117188],[10.7222595214844,4.13079833984375],[11.2364501953125,2.40261840820312],[11.4739532470703,0.61526489257812],[11.428955078125,-1.18722534179688],[11.1025085449219,-2.96047973632812],[10.5027008056641,-4.660888671875],[42.1499938964844,-27.3000183105469],[25.9811706542969,-24.3951568603516],[20.610107421875,-19.7757263183594],[0,0],[2.65951538085938,-2.49481201171875],[2.23648071289062,-2.88014221191406],[1.75839233398438,-3.19453430175781],[1.23699951171875,-3.43028259277344],[0.6851806640625,-3.58155822753906],[0.116455078125,-3.6446533203125],[-0.45513916015625,-3.61799621582031],[-1.0155029296875,-3.50225830078125],[-1.55087280273438,-3.30027770996094],[-2.04806518554688,-3.01702880859375],[-2.49481201171875,-2.65950012207031],[-2.880126953125,-2.23648071289062],[-3.19454956054688,-1.75839233398438],[-3.4302978515625,-1.23701477050781],[-3.58157348632812,-0.68516540527344],[-3.6446533203125,-0.116455078125],[-3.61801147460938,0.45512390136719],[-3.50225830078125,1.0155029296875],[-3.30029296875,1.55087280273438],[-20.5499877929688,13.9499969482422],[-20.610107421875,19.7757263183594],[-25.9811859130859,24.3951721191406],[0,0],[0,0]],"vertices":[[-59.5267028808594,-91.9066009521484],[-73.1711883544922,-81.4630584716797],[-85.0139617919922,-69.0136108398438],[-94.7633972167969,-54.8648223876953],[-102.179458618164,-39.3650817871094],[-107.079513549805,-22.8960418701172],[-109.342910766602,-5.86323547363281],[-108.913940429688,11.3139495849609],[-105.803131103516,28.2125396728516],[-100.087112426758,44.4164581298828],[-91.9066009521484,59.5266876220703],[-81.4630584716797,73.1711883544922],[-69.0136108398438,85.0139617919922],[-54.8648223876953,94.7633819580078],[-39.3650817871094,102.179458618164],[-22.8960571289062,107.079513549805],[-5.86323547363281,109.342910766602],[11.3139495849609,108.913925170898],[28.2125549316406,105.803115844727],[44.4164581298828,100.087112426758],[59.5267028808594,91.9066009521484],[169.933746337891,-59.6526794433594],[229.694000244141,-145.137512207031],[290.017303466797,-191.74870300293],[294.274719238281,-195.155853271484],[297.946716308594,-199.187072753906],[300.94287109375,-203.743072509766],[303.189422607422,-208.711700439453],[304.631072998047,-213.970581054688],[305.232269287109,-219.390243530273],[304.978271484375,-224.83723449707],[303.875305175781,-230.17741394043],[301.950500488281,-235.279327392578],[299.251312255859,-240.017303466797],[295.844146728516,-244.274703979492],[291.812927246094,-247.946701049805],[287.256927490234,-250.94287109375],[282.288299560547,-253.189422607422],[277.029418945312,-254.631057739258],[271.609771728516,-255.232269287109],[266.162780761719,-254.978271484375],[260.822570800781,-253.875289916992],[255.720672607422,-251.950500488281],[250.982696533203,-249.25129699707],[174.305999755859,-202.862487792969],[111.066268920898,-122.347320556641],[-59.5267028808594,-91.9066009521484],[-59.5267028808594,-91.9066009521484]]},"expression":"var fingerName = \"thumb\";\r\n\r\nvar smoothness = parent.effect(\"finger smoothness\")(\"Slider\"); // 0-1\r\nvar taper = parent.effect(\"Taper Amount\")(\"Slider\"); // 0–100\r\nvar softness = parent.effect(\"Joint Softness\")(\"Slider\") / 100; // 0–1\r\nvar tipSegments = Math.max(6, Math.round(smoothness * 2));\r\nvar baseSegments = tipSegments;\r\n\r\n// === Joint Positions & Widths ===\r\n\r\nvar joints = [\r\n    content(\"fingers\").content(fingerName).content(\"joints\").content(\"metacarpal\"),\r\n    content(\"fingers\").content(fingerName).content(\"joints\").content(\"proximal\"),\r\n    content(\"fingers\").content(fingerName).content(\"joints\").content(\"distal\"),\r\n    content(\"fingers\").content(fingerName).content(\"joints\").content(\"end\")\r\n];\r\nvar points = joints.map(function(j) { return j.transform.position; });\r\n\r\n// Apply tapering\r\nvar widths = joints.map(function(j, i) {\r\n    var baseWidth = j.content(\"ellipse\").size[0];\r\n    var factor = 1 - (i / (joints.length - 1)) * (taper / 100);\r\n    return baseWidth * factor;\r\n});\r\n\r\n// === Vector Helpers ===\r\n\r\nfunction sub(a, b) { return [a[0] - b[0], a[1] - b[1]]; }\r\nfunction add(a, b) { return [a[0] + b[0], a[1] + b[1]]; }\r\nfunction scale(v, s) { return [v[0] * s, v[1] * s]; }\r\nfunction norm(v) {\r\n    var l = Math.sqrt(v[0] * v[0] + v[1] * v[1]);\r\n    return l === 0 ? [0, 0] : [v[0] / l, v[1] / l];\r\n}\r\nfunction perp(v) { return [-v[1], v[0]]; }\r\nfunction dist(a, b) {\r\n    var dx = b[0] - a[0], dy = b[1] - a[1];\r\n    return Math.sqrt(dx * dx + dy * dy);\r\n}\r\nfunction angleBetween(a, b) {\r\n    var dot = a[0] * b[0] + a[1] * b[1];\r\n    var det = a[0] * b[1] - a[1] * b[0];\r\n    return Math.atan2(det, dot);\r\n}\r\nfunction customLinear(val, inMin, inMax, outMin, outMax) {\r\n    val = Math.max(inMin, Math.min(val, inMax));\r\n    return outMin + (val - inMin) * (outMax - outMin) / (inMax - inMin);\r\n}\r\n\r\n// === Compute Tangents for Centerline ===\r\n\r\nvar inTangents = [], outTangents = [];\r\nvar bends = []; // Store bend values for each intermediate point\r\n\r\nfor (var i = 0; i < points.length; i++) {\r\n    if (i === 0) {\r\n        var dir = norm(sub(points[1], points[0]));\r\n        var len = dist(points[0], points[1]) * softness;\r\n        inTangents.push([0, 0]);\r\n        outTangents.push(scale(dir, len));\r\n        bends.push(0); // No bend at the start\r\n    } else if (i === points.length - 1) {\r\n        var dir = norm(sub(points[i], points[i-1]));\r\n        var len = dist(points[i], points[i-1]) * softness;\r\n        inTangents.push(scale(dir, -len));\r\n        outTangents.push([0, 0]);\r\n        bends.push(0); // No bend at the end\r\n    } else {\r\n        var prev = norm(sub(points[i], points[i - 1]));\r\n        var next = norm(sub(points[i + 1], points[i]));\r\n        var dir = norm(add(prev, next));\r\n\r\n        // Concave/convex weighting via dot product (bend calculation)\r\n        var bend = prev[0] * next[0] + prev[1] * next[1];\r\n        bends.push(bend); // Store the bend value\r\n\r\n        var concaveFactor = customLinear(bend, -1, 1, 0.1, 1);\r\n        var len = Math.min(dist(points[i], points[i - 1]), dist(points[i], points[i + 1])) * softness * concaveFactor;\r\n        inTangents.push(scale(dir, -len));\r\n        outTangents.push(scale(dir, len));\r\n    }\r\n}\r\nbends.unshift(0); // Add a bend value for the first point\r\nbends.push(0);  // Add a bend value for the last point\r\n\r\n// === Offset Curve Function ===\r\n\r\nfunction offsetPath(side, bend) {\r\n    var newPoints = [], newInTangents = [], newOutTangents = [];\r\n\r\n    for (var i = 0; i < points.length; i++) {\r\n        var p = points[i];\r\n        var width = widths[i] / 2;\r\n\r\n        var dir;\r\n        if (i === 0) {\r\n            dir = norm(sub(points[1], points[0]));\r\n        } else if (i === points.length - 1) {\r\n            dir = norm(sub(points[i], points[i - 1]));\r\n        } else {\r\n            var prev = norm(sub(p, points[i - 1]));\r\n            var next = norm(sub(points[i + 1], p));\r\n            dir = norm(add(prev, next));\r\n        }\r\n\r\n        var perpDir = side === \"left\" ? perp(dir) : scale(perp(dir), -1);\r\n        var offset = scale(perpDir, width);\r\n\r\n        newPoints.push(add(p, offset));\r\n\r\n        // Force Near-Zero Tangents on Inside of Bent Knuckles\r\n        if (i > 0 && i < points.length - 1) {\r\n            var tangentLength = Math.min(dist(points[i], points[i - 1]), dist(points[i], points[i + 1])) * softness;\r\n            var smoothnessFactor = customLinear(softness, 0, 1, 1, 1.5);\r\n\r\n            if ((side === \"left\" && bend < -0.3) || (side === \"right\" && bend > 0.3)) {\r\n                // Force near-zero tangents on the inside\r\n                newInTangents.push([0, 0]);\r\n                newOutTangents.push([0, 0]);\r\n            } else { // Outside or less bent\r\n                newInTangents.push(scale(dir, -tangentLength * smoothnessFactor));\r\n                newOutTangents.push(scale(dir, tangentLength * smoothnessFactor));\r\n            }\r\n        } else {\r\n            newInTangents.push(inTangents[i]);\r\n            newOutTangents.push(outTangents[i]);\r\n        }\r\n    }\r\n\r\n    return {\r\n        pts: newPoints,\r\n        inTangents: newInTangents,\r\n        outTangents: newOutTangents\r\n    };\r\n}\r\n\r\n// === Left and Right Sides ===\r\nvar left = offsetPath(\"left\", bends);\r\nvar right = offsetPath(\"right\", bends);\r\n\r\n// === Tip Arc ===\r\n\r\nvar tipPoints = [], tipInTangents = [], tipOutTangents = [];\r\n\r\nvar tipCenter = points[points.length - 1];\r\nvar tipRadius = widths[widths.length - 1] / 2;\r\nvar tipDir = norm(sub(points[points.length - 1], points[points.length - 2]));\r\nvar tipPerp = perp(tipDir);\r\nvar arcLen = 4 / 3 * Math.tan(Math.PI / (2 * tipSegments));\r\n\r\nfor (var i = 0; i <= tipSegments; i++) {\r\n    var angle = Math.PI * i / tipSegments;\r\n    var x = Math.cos(angle) * tipRadius;\r\n    var y = Math.sin(angle) * tipRadius;\r\n\r\n    var pt = [\r\n        tipCenter[0] + x * tipPerp[0] + y * tipDir[0],\r\n        tipCenter[1] + x * tipPerp[1] + y * tipDir[1]\r\n    ];\r\n    tipPoints.push(pt);\r\n\r\n    var tanDir = [-Math.sin(angle), Math.cos(angle)];\r\n    var tangent = scale([\r\n        tanDir[0] * tipPerp[0] + tanDir[1] * tipDir[0],\r\n        tanDir[0] * tipPerp[1] + tanDir[1] * tipDir[1]\r\n    ], tipRadius * arcLen);\r\n\r\n    tipInTangents.push(scale(tangent, -1));\r\n    tipOutTangents.push(tangent);\r\n}\r\n\r\n// === Base Arc ===\r\n\r\nvar basePoints = [], baseInTangents = [], baseOutTangents = [];\r\n\r\nvar baseCenter = points[0];\r\nvar baseRadius = widths[0] / 2;\r\nvar baseDir = norm(sub(points[1], points[0]));\r\nvar basePerp = perp(baseDir);\r\nvar baseArcLen = 4 / 3 * Math.tan(Math.PI / (2 * baseSegments));\r\n\r\nfor (var i = 0; i <= baseSegments; i++) {\r\n    var angle = Math.PI + Math.PI * i / baseSegments;\r\n    var x = Math.cos(angle) * baseRadius;\r\n    var y = Math.sin(angle) * baseRadius;\r\n\r\n    var pt = [\r\n        baseCenter[0] + x * basePerp[0] + y * baseDir[0],\r\n        baseCenter[1] + x * basePerp[1] + y * baseDir[1]\r\n    ];\r\n    basePoints.push(pt);\r\n\r\n    var tanDir = [-Math.sin(angle), Math.cos(angle)];\r\n    var tangent = scale([\r\n        tanDir[0] * basePerp[0] + tanDir[1] * baseDir[0],\r\n        tanDir[0] * basePerp[1] + tanDir[1] * baseDir[1]\r\n    ], baseRadius * baseArcLen);\r\n\r\n    baseInTangents.push(scale(tangent, -1));\r\n    baseOutTangents.push(tangent);\r\n}\r\n\r\n// === Combine All Points ===\r\n\r\nvar finalPts = basePoints\r\n    .slice(0, -1)\r\n    .concat(left.pts)\r\n    .concat(tipPoints.slice(1, -1))\r\n    .concat(right.pts.reverse());\r\n\r\nvar finalInTangents = baseInTangents\r\n    .slice(0, -1)\r\n    .concat(left.inTangents)\r\n    .concat(tipInTangents.slice(1, -1))\r\n    .concat(right.outTangents.reverse());\r\n\r\nvar finalOutTangents = baseOutTangents\r\n    .slice(0, -1)\r\n    .concat(left.outTangents)\r\n    .concat(tipOutTangents.slice(1, -1))\r\n    .concat(right.inTangents.reverse());\r\n\r\n// === Close Path ===\r\n\r\nfinalPts.push(finalPts[0]);\r\nfinalInTangents.push([0, 0]);\r\nfinalOutTangents.push([0, 0]);\r\n\r\n// === Create Path ===\r\n\r\ncreatePath(finalPts, finalInTangents, finalOutTangents, true);"},{"name":"wrist"},{"name":"joint"},{"name":"Position","value":[0,0],"expression":""},{"name":"Scale","value":[100,100],"expression":""},{"name":"Skew","value":0,"expression":""},{"name":"Opacity","value":100,"expression":""},{"name":"Anchor Point","value":[0,0],"expression":""},{"name":"Rotation","value":0,"expression":""},{"name":"Skew Axis","value":0,"expression":""},{"name":"Size","value":[219,219],"expression":"temp = thisComp.layer(\"ctrl hand\").effect(\"size\")(\"Slider\");\r[temp, temp]"},{"name":"Position","value":[0,0],"expression":""}]